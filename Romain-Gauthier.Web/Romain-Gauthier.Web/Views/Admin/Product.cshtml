
@{
    ViewBag.Title = "Product";
}
@Scripts.Render("~/bundles/admin-product")
<style>
    img {
        height: auto;
        width: auto;
    }
</style>
<div class="row" style="padding-top: 25px;">
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">产品系列管理</div>
        <div class="panel-body">
            <div class="form-horizontal" style="max-width: 350px; margin: 0 auto">
                <div class="form-group">
                    <label class="col-md-2 control-label">名称</label>
                    <div class="col-md-10">
                        <input type="text" class="form-control" placeholder="Name" data-bind="value:viewModel.type.Name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">父类</label>
                    <div class="col-md-10">
                        <select class="form-control" data-bind="options: viewModel.types,optionsText: 'Name', optionsCaption: '选择',value:viewModel.parentType"></select>
                    </div>
                </div>
                <div class="form-group text-center">
                    <button type="button" class="btn btn-default" data-bind="click:Product.viewModel.SaveType">保存</button>
                    <button type="button" class="btn btn-default" data-bind="click:Product.viewModel.TypeCannel">取消</button>
                </div>
            </div>
        </div>
        <!-- Table -->
        <table class="table table-striped" data-bind="visible:viewModel.types().length!=0">
            <thead>
                <tr>
                    <th>#</th>
                    <th>名称</th>
                    <th>上级</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody data-bind="foreach:viewModel.types">
                <tr>
                    <td data-bind="text:$index"></td>
                    <td data-bind="text:Name"></td>
                    <td data-bind="text:ParentName"></td>
                    <td>
                        <span><a href="#" data-bind="click:Product.viewModel.EditType">编辑</a></span>
                        <span><a href="#" data-bind="click:Product.viewModel.TypeDelete">删除</a></span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">产品管理</div>
        <div class="panel-body">
            <div class="form-horizontal" style="max-width: 350px; margin: 0 auto">
                <div class="form-group">
                    <label class="col-md-2 control-label">名称</label>
                    <div class="col-md-10">
                        <input type="text" class="form-control" placeholder="Name" data-bind="value:viewModel.product.Name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">系列</label>
                    <div class="col-md-10">
                        <select class="form-control" data-bind="options: viewModel.types,optionsText: 'Name', optionsCaption: '选择',value:viewModel.producttype"></select>
                    </div>
                </div>
                <div class="form-group text-center">
                    <button type="button" class="btn btn-default" data-bind="click:Product.viewModel.SaveProduct">保存</button>
                    <button type="button" class="btn btn-default" data-bind="click:Product.viewModel.ProductCannel">取消</button>
                </div>
            </div>
        </div>
        <!-- Table -->
        <table class="table table-striped" data-bind="visible:viewModel.products().length!=0">
            <thead>
                <tr>
                    <th>#</th>
                    <th>名称</th>
                    <th>系列</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody data-bind="foreach:viewModel.products">
                <tr>
                    <td data-bind="text:$index"></td>
                    <td data-bind="text:Name"></td>
                    <td data-bind="text:TypeName"></td>
                    <td>
                        <span><a href="#" data-bind="click:Product.viewModel.EditProduct">编辑</a></span>
                        <span><a href="#" data-bind="click:Product.viewModel.DeleteProduct">删除</a></span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">产品图册管理</div>
        <div class="panel-body">
            <div class="form-horizontal" style="max-width: 350px; margin: 0 auto">
                <div class="form-group">
                    <label class="col-md-3 control-label">名称</label>
                    <div class="col-md-9">
                        <input type="text" class="form-control" placeholder="Name" data-bind="value:viewModel.productimage.Name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">产品</label>
                    <div class="col-md-9">
                        <select class="form-control" data-bind="options: viewModel.products,optionsText: function(item){return item.TypeName() + ' - ' + item.Name()}, optionsCaption: '选择',value:viewModel.imageproduct"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-3 control-label">选择图片</label>
                    <div class="col-md-9">
                        <form method="post" enctype="multipart/form-data" action="/API/Upload">
                            <input type="file" id="file" accept=".png,.jpge,.gif,.jpg">
                        </form>
                    </div>
                </div>
                <div class="form-group text-center">
                    <button type="button" class="btn btn-default" data-bind="click:Product.viewModel.Upload">上传</button>
                </div>
            </div>
        </div>
        <!-- Table -->
        <table class="table table-striped" data-bind="visible:viewModel.productimages().length!=0">
            <thead>
                <tr>
                    <th>#</th>
                    <th>图片</th>
                    <th>名称</th>
                    <th>产品</th>
                    <th>系列</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody data-bind="foreach:viewModel.productimages">
                <tr>
                    <td data-bind="text:$index"></td>
                    <td>
                        <img data-bind="attr:{src:Url}" class="img-responsive thumbnail" style="max-height: 150px; max-width: 150px;"/>

                    </td>
                    <td data-bind="text:Name"></td>
                    <td data-bind="text:ProductName"></td>
                    <td data-bind="text:ProductTypeName"></td>
                    <td>
                        <span><a data-bind="attr:{href:Url}" target="_blank">查看</a></span>
                        <span><a href="#" data-bind="click:Product.viewModel.ImageDelete">删除</a></span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>